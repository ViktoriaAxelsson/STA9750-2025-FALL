<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.22">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Viktoria Axelsson">
<meta name="dcterms.date" content="2025-12-10">

<title>Individual Report - How is Corruption Affecting Happiness? – STA 9750 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-cd7454b418030687c631a6a7286fbe16.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-0fd445826db4cc1007072b2af7a3b60c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.11.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


</head>

<body class="floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 Submission Material</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#what-is-corruption-and-cpi" id="toc-what-is-corruption-and-cpi" class="nav-link" data-scroll-target="#what-is-corruption-and-cpi">What is Corruption and CPI</a></li>
  </ul></li>
  <li><a href="#key-observations" id="toc-key-observations" class="nav-link" data-scroll-target="#key-observations">Key Observations</a>
  <ul class="collapse">
  <li><a href="#corruption-trends" id="toc-corruption-trends" class="nav-link" data-scroll-target="#corruption-trends">Corruption Trends</a></li>
  <li><a href="#happiness-trends" id="toc-happiness-trends" class="nav-link" data-scroll-target="#happiness-trends">Happiness Trends</a></li>
  <li><a href="#interpretation-of-findings" id="toc-interpretation-of-findings" class="nav-link" data-scroll-target="#interpretation-of-findings">Interpretation of Findings</a></li>
  </ul></li>
  <li><a href="#overall-key-takeaways---uzbekistan" id="toc-overall-key-takeaways---uzbekistan" class="nav-link" data-scroll-target="#overall-key-takeaways---uzbekistan">Overall Key Takeaways - Uzbekistan</a></li>
  <li><a href="#overall-comparison-of-countries-with-highest-vs-lowest-corruption-index" id="toc-overall-comparison-of-countries-with-highest-vs-lowest-corruption-index" class="nav-link" data-scroll-target="#overall-comparison-of-countries-with-highest-vs-lowest-corruption-index">Overall comparison of countries with highest vs lowest corruption index</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Individual Report - How is Corruption Affecting Happiness?</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Viktoria Axelsson </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 10, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><img src="corruption.png" class="img-fluid"></p>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This report examines the relationship between corruption and happiness, both globally and in the context of Uzbekistan. At the global level, we analyze countries with the highest and lowest Corruption Perceptions Index (CPI) scores in 2023 to understand whether low corruption aligns with higher happiness and whether high corruption is generally associated with lower well-being. By comparing CPI scores with happiness rankings, we can identify patterns and notable exceptions, revealing the complex relationship between corruption and national happiness.</p>
<p>Beyond the global perspective, the report focuses in detail on Uzbekistan, a particularly interesting case due to its significant anti-corruption reforms since 2016 and the availability of data from 2016–2025. By examining both perceived corruption and happiness rankings over this period, we explore whether reductions in corruption correspond with improvements in well-being, while also considering the influence of broader social, economic, and political factors, such as health, education, infrastructure, and public optimism.</p>
<section id="what-is-corruption-and-cpi" class="level3">
<h3 class="anchored" data-anchor-id="what-is-corruption-and-cpi">What is Corruption and CPI</h3>
<p>Corruption refers to the abuse of entrusted power for private gain. It can occur in both public and private sectors and includes practices such as bribery, embezzlement, nepotism, favoritism, and manipulation of policies or resources for personal benefit. Corruption undermines trust in institutions, reduces government effectiveness, and can negatively impact economic development, social equality, and public well-being.</p>
<p>In the context of this report, corruption is measured using the Corruption Perceptions Index (CPI), which reflects the perceived level of public sector corruption based on expert assessments and surveys. Higher CPI scores indicate lower corruption, while lower scores indicate higher corruption. By analyzing CPI scores alongside happiness rankings, we can explore how perceived corruption may influence citizens’ satisfaction and overall well-being.</p>
<p><strong>1. Get dataset for happiness ranking 2019-2025 and a separate for corruption index</strong></p>
<p><strong>Datasets:</strong></p>
<ul>
<li><a href="https://www.worldhappiness.report/">The World Happiness Report</a></li>
<li><a href="https://ourworldindata.org/grapher/ti-corruption-perception-index?tab=table&amp;time=earliest..2024&amp;tableSearch=uzbekistan#explore-the-data">Our World in Data</a></li>
</ul>
<p>Two primary datasets for this analysis:</p>
<p><strong>Happiness Ranking</strong>: The happiness ranking dataset from the World Happiness Report is publicly available and includes country rankings from 2019–2025. For each country, the dataset provides detailed information on multiple factors contributing to happiness, including:</p>
<ul>
<li><p>Perceived corruption</p></li>
<li><p>Generosity</p></li>
<li><p>Freedom</p></li>
<li><p>Health and social support</p></li>
<li><p>GDP per capita</p></li>
<li><p>Dystopia + residual, which represents the unexplained portion of a country’s happiness score</p></li>
</ul>
<p>This dataset captures the population’s perceptions and experiences that influence happiness, offering insights into both objective and subjective well-being.</p>
<p><strong>Corruption Index:</strong> While the happiness dataset reflects perceptions of how corruption affects happiness, it does not measure actual corruption levels. To analyze the real impact, we use the Corruption Perceptions Index (CPI) from Our World in Data, which provides scores for each country from 2019–2025. The CPI measures perceived levels of public sector corruption based on expert assessments and surveys, giving a more objective comparison of corruption across countries.</p>
<p>By combining these two datasets, we can compare the corruption index score with overall happiness rankings in depth for specific countries. This approach allows us to identify patterns and exceptions, and to explore whether lower corruption consistently aligns with higher happiness, or whether other social, economic, or political factors play a significant role.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(ggplot2))</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(plotly))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(dplyr))</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(gridExtra))</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(grid))</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(knitr))</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(kableExtra))</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(readr))</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(readxl))</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(tidyr))</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(patchwork))</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) File paths</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>cpi_csv <span class="ot">&lt;-</span> <span class="st">"/Users/ViktoriaAxelsson/Desktop/ti-corruption-perception-index.filtered/ti-corruption-perception-index.csv"</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>happiness_xlsx <span class="ot">&lt;-</span> <span class="st">"/Users/ViktoriaAxelsson/Desktop/WHR25_Data_Figure_2.1v3 (1).xlsx"</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Load datasets</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>cpi_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(cpi_csv, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>happiness_df <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(happiness_xlsx)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>2. Check on the datasets</strong></p>
<p>To ensure that I have done the setup properly, I wanted to see the column names. This also helps to identify how to combine and filter them in the next steps.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Quick column check </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">colnames</span>(cpi_df))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Entity"                          "Code"                           
[3] "Year"                            "Corruption Perceptions Index"   
[5] "World regions according to OWID" "time"                           </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">colnames</span>(happiness_df))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Year"                                      
 [2] "Rank"                                      
 [3] "Country name"                              
 [4] "Life evaluation (3-year average)"          
 [5] "Lower whisker"                             
 [6] "Upper whisker"                             
 [7] "Explained by: Log GDP per capita"          
 [8] "Explained by: Social support"              
 [9] "Explained by: Healthy life expectancy"     
[10] "Explained by: Freedom to make life choices"
[11] "Explained by: Generosity"                  
[12] "Explained by: Perceptions of corruption"   
[13] "Dystopia + residual"                       </code></pre>
</div>
</div>
<p><strong>3. Choose Country and Prepare CPI tibble rescale - Uzbekistan </strong></p>
<p>To investigate the effects of corruption on happiness more closely, I wanted to focus on a specific country with recent historical events and substantial efforts to reduce corruption.</p>
<p>Uzbekistan was chosen because it has implemented significant anti-corruption reforms since 2016, making it an interesting case for exploring the relationship between corruption and happiness. This analysis focuses on data from 2016–2025, which is available for this country.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Data has columns: Entity, Year, Corruption Perceptions Index</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>uzbekistan_cpi <span class="ot">&lt;-</span> cpi_df <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Entity <span class="sc">==</span> <span class="st">"Uzbekistan"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Year, <span class="st">`</span><span class="at">Corruption Perceptions Index</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">CPI_Score =</span> <span class="st">`</span><span class="at">Corruption Perceptions Index</span><span class="st">`</span> <span class="sc">*</span> <span class="dv">10</span>   <span class="co"># convert 2.2 -&gt; 22</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>4. Prepare Uzbekistan Happiness Rank tibble</strong></p>
<p>Here we set up the essential columns for Uzbekistan’s happiness ranking.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Data has column "Country name" and "Year" and "Rank"</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>uzbekistan_rank <span class="ot">&lt;-</span> happiness_df <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Country name</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Uzbekistan"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Year, Rank) <span class="sc">%&gt;%</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Year)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>5.Filter to the years of interest (2016-2025)</strong></p>
<p>Here we filter to the years 2016-2025 to see how the country progress over time.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>years_min <span class="ot">&lt;-</span> <span class="dv">2016</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>years_max <span class="ot">&lt;-</span> <span class="dv">2025</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># CPI plot data</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>uzb_cpi_plot_df <span class="ot">&lt;-</span> uzbekistan_cpi <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">&gt;=</span> years_min <span class="sc">&amp;</span> Year <span class="sc">&lt;=</span> years_max)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Happiness plot data</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>uzb_rank_plot_df <span class="ot">&lt;-</span> uzbekistan_rank <span class="sc">%&gt;%</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">&gt;=</span> years_min <span class="sc">&amp;</span> Year <span class="sc">&lt;=</span> years_max)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>6.Mark highlight years and set label positions</strong></p>
<p>Here, I want to ensure that the chosen years are highlighted, as these are the periods where we can observe a clear alignment—or lack—between the corruption index and the happiness ranking. Highlighting these years allows viewers to quickly identify key trends and discrepancies when examining the line chart.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>highlight_years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2019</span>, <span class="dv">2023</span>, <span class="dv">2024</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>uzb_cpi_plot_df <span class="ot">&lt;-</span> uzb_cpi_plot_df <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">highlight =</span> Year <span class="sc">%in%</span> highlight_years)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>uzb_rank_plot_df <span class="ot">&lt;-</span> uzb_rank_plot_df <span class="sc">%&gt;%</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">highlight =</span> Year <span class="sc">%in%</span> highlight_years)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>uzb_cpi_plot_df <span class="ot">&lt;-</span> uzb_cpi_plot_df <span class="sc">%&gt;%</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label_y =</span> CPI_Score <span class="sc">+</span> <span class="dv">5</span>) </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>uzb_rank_plot_df <span class="ot">&lt;-</span> uzb_rank_plot_df <span class="sc">%&gt;%</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label_y =</span> Rank <span class="sc">-</span> <span class="fl">1.5</span>)      <span class="co"># since Rank is inverted, subtract to move label "up" visually</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
</section>
<section id="key-observations" class="level2">
<h2 class="anchored" data-anchor-id="key-observations">Key Observations</h2>
<section id="corruption-trends" class="level3">
<h3 class="anchored" data-anchor-id="corruption-trends">Corruption Trends</h3>
<p><strong>7. Build the corruption plot (inverted y-axis so line going down = more corruption)</strong></p>
<p>Although the corruption index is designed so that a higher score indicates worse corruption—meaning the line chart rises as corruption increases—it didn’t make sense to me as a viewer. Intuitively, one might expect the line to go down when there is less corruption. That is why I reversed the order in the graph by inverting the y-axis.</p>
<p>This adjustment makes it easier to align the corruption line with the happiness score, allowing viewers to see the correlation more clearly.</p>
<p>In addition, I chose to highlight in yellow the years that, based on my analysis, have the greatest impact on the conclusions.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>corruption_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(uzb_cpi_plot_df, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> CPI_Score)) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">linewidth =</span> <span class="fl">1.25</span>) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> highlight), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"TRUE"</span> <span class="ot">=</span> <span class="st">"orange"</span>, <span class="st">"FALSE"</span> <span class="ot">=</span> <span class="st">"red"</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#label for highlighted points with the year</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">subset</span>(uzb_cpi_plot_df, highlight <span class="sc">==</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> label_y, <span class="at">label =</span> Year),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="dv">0</span>,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(years_min, years_max, <span class="at">by =</span> <span class="dv">1</span>), <span class="at">minor_breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>(<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="fl">0.02</span>, <span class="fl">0.08</span>))) <span class="sc">+</span>  <span class="co"># invert y-axis, adding space at top-right for labels</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Uzbekistan – Perceived Corruption (2016–2025)"</span>,</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"CPI Score (rescaled; higher = more corruption visually)"</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="at">angle =</span> <span class="dv">0</span>),</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Display corruption plot</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(corruption_plot)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Individualreport_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#save for use to presentation </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"/Users/ViktoriaAxelsson/Desktop/uzbekistan_corruption.png"</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> corruption_plot, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Key Finding
</div>
</div>
<div class="callout-body-container callout-body">
<p>As seen in the line chart above, perceived corruption in Uzbekistan decreased notably from 2016 onwards, reaching its lowest point in 2023, followed by a slight increase in 2024. However, overall corruption remains much lower than in earlier years.</p>
</div>
</div>
</section>
<section id="happiness-trends" class="level3">
<h3 class="anchored" data-anchor-id="happiness-trends">Happiness Trends</h3>
<p><strong>8. Build the happiness rank plot (inverted y-axis so lower rank (happier) appears higher)</strong></p>
<p>As explained for the corruption plot, I wanted to do the same thing for the happiness ranking here as well. The happier a country is, the higher it should appear on the plot.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>happiness_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(uzb_rank_plot_df, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Rank)) <span class="sc">+</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"forestgreen"</span>, <span class="at">linewidth =</span> <span class="fl">1.25</span>) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> highlight), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"TRUE"</span> <span class="ot">=</span> <span class="st">"orange"</span>, <span class="st">"FALSE"</span> <span class="ot">=</span> <span class="st">"darkgreen"</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Labeled the highlighted points with the year</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">subset</span>(uzb_rank_plot_df, highlight <span class="sc">==</span> <span class="cn">TRUE</span>),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> label_y, <span class="at">label =</span> Year),</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="dv">0</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(years_min, years_max, <span class="at">by =</span> <span class="dv">1</span>), <span class="at">minor_breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>(<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="fl">0.02</span>, <span class="fl">0.08</span>))) <span class="sc">+</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Uzbekistan – World Happiness Rank (2016–2025)"</span>,</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Happiness Rank (lower = happier)"</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Display and save happiness plot</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(happiness_plot)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Individualreport_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"/Users/ViktoriaAxelsson/Desktop/uzbekistan_happiness.png"</span>,</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> happiness_plot, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Key Finding
</div>
</div>
<div class="callout-body-container callout-body">
<p>As seen in the line chart above, happiness rankings improved steadily from 2016–2019, peaking in 2019.</p>
<p>In the following years, happiness declined, even as corruption continued to decrease — except in 2023, when the lowest corruption coincided with a noticeable increase in happiness.</p>
</div>
</div>
</section>
<section id="interpretation-of-findings" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-of-findings">Interpretation of Findings</h3>
<p><strong>9. Combine side-by-side and save combined image</strong></p>
<p>To make it possible to compare the two datasets and findings, and see whether they correlate, I combined them side by side. This way, you can easily see where they are similar and where they differ.</p>
<p>With this chart, you can now observe whether the country’s happiness has risen or fallen as corruption has increased or decreased over the years.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>combined_plot <span class="ot">&lt;-</span> corruption_plot <span class="sc">+</span> happiness_plot <span class="sc">+</span> <span class="fu">plot_layout</span>(<span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a centered title</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>combined_plot <span class="ot">&lt;-</span> combined_plot <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Uzbekistan: Corruption vs Happiness (2016–2025)"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Display combined</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(combined_plot)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Individualreport_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save combined as PNG</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"/Users/ViktoriaAxelsson/Desktop/uzbekistan_combined.png"</span>,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> combined_plot, <span class="at">width =</span> <span class="dv">16</span>, <span class="at">height =</span> <span class="dv">6</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Key Finding
</div>
</div>
<div class="callout-body-container callout-body">
<p>As seen in the line charts side by side above, the data suggests:</p>
<ul>
<li><p>There is a <strong>partial relationship</strong> between corruption and happiness. From <strong>2016 - 2019</strong>, corruption steadily decreased while the country went up in the hapiness ranking. In <strong>2023–2024</strong>, large changes in corruption levels corresponded with shifts in happiness, implying that corruption can influence happiness in a country.</p></li>
<li><p>The trends are <strong>not fully consistent</strong>. For example, in <strong>2019</strong>, Uzbekistan’s happiness was at its peak despite corruption levels not reaching its lowest point, indicating that other social, economic, or political factors played a larger role in shaping well-being 2019.</p></li>
</ul>
</div>
</div>
<p><strong>Additional information during these years worth noting in alignment with the data:</strong></p>
<ul>
<li><p><strong>2019:</strong> Multiple economic and social reforms were underway with support from the World Bank, including a <strong>$500 million</strong> loan for private-sector growth, job creation, social inclusion, and reforms in <strong>health, education</strong>, and <strong>infrastructure</strong>.</p>
<p>Tax burdens were also reduced, and many international development investors became involved. A World Bank study found that <strong>95% of households</strong> were optimistic about the future, suggesting that happiness in <strong>2019</strong> was driven more by broader reforms and optimism than only by changes in corruption.</p></li>
<li><p><strong>2023:</strong> A presidential election took place, accompanied by new reforms expanding <strong>human-rights and civil-liberties protections</strong>, as well as measures to improve <strong>government transparency and accountability</strong>.</p>
<p>These changes likely contributed to the perception of lower corruption and to an associated increase in happiness.</p></li>
<li><p><strong>2024</strong>: Anti-corruption efforts continued. Reports indicated that while <strong>bribery cases decreased, other forms of corruption increased</strong>, including embezzlement, abuse of office, and illegal state procurement. For example, the country’s anti-corruption agency disclosed that illegal state procurements totaling a substantial sum were uncovered in <strong>2024</strong>.</p>
<p>This helps explain why <strong>perceived corruption</strong> rose slightly during that year and why the <strong>happiness ranking</strong> declined.</p></li>
</ul>
</section>
</section>
<section id="overall-key-takeaways---uzbekistan" class="level2">
<h2 class="anchored" data-anchor-id="overall-key-takeaways---uzbekistan">Overall Key Takeaways - Uzbekistan</h2>
<p>In 2023 and 2024, changes in corruption appear to have had a more direct influence on happiness, with reductions in corruption aligning with increases in well-being and slight rises in corruption coinciding with declines. By contrast, in 2019, happiness peaked despite relatively higher corruption levels, indicating that other factors—such as economic and social reforms, health, education, infrastructure improvements, and international support—played a more dominant role.</p>
<p>Overall, Uzbekistan’s case illustrates that while corruption can affect happiness, broader social, economic, and policy factors are also crucial determinants of well-being, and understanding these influences is essential for improving happiness at the national level.</p>
</section>
<section id="overall-comparison-of-countries-with-highest-vs-lowest-corruption-index" class="level2">
<h2 class="anchored" data-anchor-id="overall-comparison-of-countries-with-highest-vs-lowest-corruption-index">Overall comparison of countries with highest vs lowest corruption index</h2>
<p>To deepen the analysis, I examined how countries with the highest and lowest corruption index scores correlate with happiness rankings. For this, I focused on data from 2023, which required filtering the datasets for that year and merging them to allow a direct comparison between corruption levels and happiness outcomes.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Filter CPI + Happiness to 2023</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>cpi_2023 <span class="ot">&lt;-</span> cpi_df <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2023</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Country =</span> Entity, <span class="at">CPI =</span> <span class="st">`</span><span class="at">Corruption Perceptions Index</span><span class="st">`</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>happiness_2023 <span class="ot">&lt;-</span> happiness_df <span class="sc">%&gt;%</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2023</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Country =</span> <span class="st">`</span><span class="at">Country name</span><span class="st">`</span>, <span class="at">HappinessRank =</span> Rank)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Merge CPI + Happiness for 2023</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>merged_2023 <span class="ot">&lt;-</span> cpi_2023 <span class="sc">%&gt;%</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(happiness_2023, <span class="at">by =</span> <span class="st">"Country"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Top 10 *most corrupt* (lowest CPI)</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>top10_most_corrupt <span class="ot">&lt;-</span> merged_2023 <span class="sc">%&gt;%</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(CPI) <span class="sc">%&gt;%</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Top 10 *least corrupt* (highest CPI)</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>top10_least_corrupt <span class="ot">&lt;-</span> merged_2023 <span class="sc">%&gt;%</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(CPI)) <span class="sc">%&gt;%</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Combine into a single tibble</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a><span class="co"># ---------------------------</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>combined_top20 <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>  top10_most_corrupt <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Group =</span> <span class="st">"Most Corrupt (Low CPI)"</span>),</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>  top10_least_corrupt <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Group =</span> <span class="st">"Least Corrupt (High CPI)"</span>)</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>combined_top20</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 4
   Country       CPI HappinessRank Group                   
   &lt;chr&gt;       &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;                   
 1 Venezuela      13            79 Most Corrupt (Low CPI)  
 2 Yemen          16           133 Most Corrupt (Low CPI)  
 3 Nicaragua      17            43 Most Corrupt (Low CPI)  
 4 Libya          18            66 Most Corrupt (Low CPI)  
 5 Afghanistan    20           143 Most Corrupt (Low CPI)  
 6 Chad           20           113 Most Corrupt (Low CPI)  
 7 Comoros        20           132 Most Corrupt (Low CPI)  
 8 Myanmar        20           118 Most Corrupt (Low CPI)  
 9 Tajikistan     20            88 Most Corrupt (Low CPI)  
10 Cambodia       22           119 Most Corrupt (Low CPI)  
11 Denmark        90             2 Least Corrupt (High CPI)
12 Finland        87             1 Least Corrupt (High CPI)
13 New Zealand    85            11 Least Corrupt (High CPI)
14 Norway         84             7 Least Corrupt (High CPI)
15 Singapore      83            30 Least Corrupt (High CPI)
16 Sweden         82             4 Least Corrupt (High CPI)
17 Switzerland    82             9 Least Corrupt (High CPI)
18 Netherlands    79             6 Least Corrupt (High CPI)
19 Germany        78            24 Least Corrupt (High CPI)
20 Luxembourg     78             8 Least Corrupt (High CPI)</code></pre>
</div>
</div>
<p>The next step was to prepare a table that lists the countries in the least and most corrupt groups. This provides a clear reference for viewers, allowing them to easily connect each country to the corresponding color in the scatterplot legend and better understand the relationship between corruption levels and happiness rankings.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Prepare 2023 data for plotting ----</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>plot_df <span class="ot">&lt;-</span> merged_2023 <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Group =</span> <span class="fu">case_when</span>(</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">%in%</span> top10_most_corrupt<span class="sc">$</span>Country  <span class="sc">~</span> <span class="st">"Most corrupt (bottom 10)"</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">%in%</span> top10_least_corrupt<span class="sc">$</span>Country <span class="sc">~</span> <span class="st">"Least corrupt (top 10)"</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span>                                     <span class="sc">~</span> <span class="st">"Other"</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">tooltip =</span> <span class="fu">paste0</span>(</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Country: "</span>, Country,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;br&gt;CPI: "</span>, <span class="fu">round</span>(CPI, <span class="dv">1</span>),</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;br&gt;Happiness Rank: "</span>, HappinessRank,</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;br&gt;Group: "</span>, Group</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare the table data</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>table_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Least Corrupt (High CPI)"</span> <span class="ot">=</span> top10_least_corrupt<span class="sc">$</span>Country,</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Most Corrupt (Low CPI)"</span>   <span class="ot">=</span> top10_most_corrupt<span class="sc">$</span>Country,</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Display table with colored headers</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(table_df, <span class="at">align =</span> <span class="st">"c"</span>, <span class="at">caption =</span> <span class="st">"Top 10 Most and Least Corrupt Countries – 2023"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>, <span class="at">position =</span> <span class="st">"center"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">background =</span> <span class="st">"green4"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">2</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">background =</span> <span class="st">"red"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small">
<caption>Top 10 Most and Least Corrupt Countries – 2023</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Least.Corrupt..High.CPI.</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Most.Corrupt..Low.CPI.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center; color: white !important; background-color: rgba(0, 139, 0, 255) !important;">Denmark</td>
<td style="text-align: center; color: white !important; background-color: red !important;">Venezuela</td>
</tr>
<tr class="even">
<td style="text-align: center; color: white !important; background-color: rgba(0, 139, 0, 255) !important;">Finland</td>
<td style="text-align: center; color: white !important; background-color: red !important;">Yemen</td>
</tr>
<tr class="odd">
<td style="text-align: center; color: white !important; background-color: rgba(0, 139, 0, 255) !important;">New Zealand</td>
<td style="text-align: center; color: white !important; background-color: red !important;">Nicaragua</td>
</tr>
<tr class="even">
<td style="text-align: center; color: white !important; background-color: rgba(0, 139, 0, 255) !important;">Norway</td>
<td style="text-align: center; color: white !important; background-color: red !important;">Libya</td>
</tr>
<tr class="odd">
<td style="text-align: center; color: white !important; background-color: rgba(0, 139, 0, 255) !important;">Singapore</td>
<td style="text-align: center; color: white !important; background-color: red !important;">Afghanistan</td>
</tr>
<tr class="even">
<td style="text-align: center; color: white !important; background-color: rgba(0, 139, 0, 255) !important;">Sweden</td>
<td style="text-align: center; color: white !important; background-color: red !important;">Chad</td>
</tr>
<tr class="odd">
<td style="text-align: center; color: white !important; background-color: rgba(0, 139, 0, 255) !important;">Switzerland</td>
<td style="text-align: center; color: white !important; background-color: red !important;">Comoros</td>
</tr>
<tr class="even">
<td style="text-align: center; color: white !important; background-color: rgba(0, 139, 0, 255) !important;">Netherlands</td>
<td style="text-align: center; color: white !important; background-color: red !important;">Myanmar</td>
</tr>
<tr class="odd">
<td style="text-align: center; color: white !important; background-color: rgba(0, 139, 0, 255) !important;">Germany</td>
<td style="text-align: center; color: white !important; background-color: red !important;">Tajikistan</td>
</tr>
<tr class="even">
<td style="text-align: center; color: white !important; background-color: rgba(0, 139, 0, 255) !important;">Luxembourg</td>
<td style="text-align: center; color: white !important; background-color: red !important;">Cambodia</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Scatterplot: Happiness Rank vs CPI (2023)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Prepare 2023 data with tooltip ----</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>plot_df <span class="ot">&lt;-</span> plot_df <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">tooltip =</span> <span class="fu">paste0</span>(</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Country: "</span>, Country,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;br&gt;CPI: "</span>, <span class="fu">round</span>(CPI, <span class="dv">1</span>),</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;br&gt;Happiness Rank: "</span>, HappinessRank,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;br&gt;Group: "</span>, Group</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Scatterplot with ggplot ----</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>p_static <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plot_df, <span class="fu">aes</span>(<span class="at">x =</span> CPI, <span class="at">y =</span> HappinessRank, <span class="at">color =</span> Group, <span class="at">text =</span> tooltip)) <span class="sc">+</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x =</span> CPI, <span class="at">y =</span> HappinessRank), <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Most corrupt (bottom 10)"</span> <span class="ot">=</span> <span class="st">"red"</span>,</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Least corrupt (top 10)"</span>   <span class="ot">=</span> <span class="st">"green4"</span>,</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Other"</span>                    <span class="ot">=</span> <span class="st">"grey60"</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>() <span class="sc">+</span>  <span class="co"># lower rank (happier) at top</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Happiness Rank vs CPI — 2023"</span>,</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Corruption Perceptions Index"</span>,</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Happiness Rank"</span>,</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Group"</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Convert to interactive plot with tooltip ----</span></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>p_interactive <span class="ot">&lt;-</span> <span class="fu">ggplotly</span>(p_static, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Display interactive plot ----</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>p_interactive</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-9271246a332432f21548" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9271246a332432f21548">{"x":{"data":[{"x":[90,87,78,78,79,85,84,83,82,82],"y":[-2,-1,-24,-8,-6,-11,-7,-30,-4,-9],"text":["Country: Denmark<br>CPI: 90<br>Happiness Rank: 2<br>Group: Least corrupt (top 10)","Country: Finland<br>CPI: 87<br>Happiness Rank: 1<br>Group: Least corrupt (top 10)","Country: Germany<br>CPI: 78<br>Happiness Rank: 24<br>Group: Least corrupt (top 10)","Country: Luxembourg<br>CPI: 78<br>Happiness Rank: 8<br>Group: Least corrupt (top 10)","Country: Netherlands<br>CPI: 79<br>Happiness Rank: 6<br>Group: Least corrupt (top 10)","Country: New Zealand<br>CPI: 85<br>Happiness Rank: 11<br>Group: Least corrupt (top 10)","Country: Norway<br>CPI: 84<br>Happiness Rank: 7<br>Group: Least corrupt (top 10)","Country: Singapore<br>CPI: 83<br>Happiness Rank: 30<br>Group: Least corrupt (top 10)","Country: Sweden<br>CPI: 82<br>Happiness Rank: 4<br>Group: Least corrupt (top 10)","Country: Switzerland<br>CPI: 82<br>Happiness Rank: 9<br>Group: Least corrupt (top 10)"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,139,0,1)","opacity":0.90000000000000002,"size":11.338582677165356,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,139,0,1)"}},"hoveron":"points","name":"Least corrupt (top 10)","legendgroup":"Least corrupt (top 10)","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[20,22,20,20,18,20,17,20,13,16],"y":[-143,-119,-113,-132,-66,-118,-43,-88,-79,-133],"text":["Country: Afghanistan<br>CPI: 20<br>Happiness Rank: 143<br>Group: Most corrupt (bottom 10)","Country: Cambodia<br>CPI: 22<br>Happiness Rank: 119<br>Group: Most corrupt (bottom 10)","Country: Chad<br>CPI: 20<br>Happiness Rank: 113<br>Group: Most corrupt (bottom 10)","Country: Comoros<br>CPI: 20<br>Happiness Rank: 132<br>Group: Most corrupt (bottom 10)","Country: Libya<br>CPI: 18<br>Happiness Rank: 66<br>Group: Most corrupt (bottom 10)","Country: Myanmar<br>CPI: 20<br>Happiness Rank: 118<br>Group: Most corrupt (bottom 10)","Country: Nicaragua<br>CPI: 17<br>Happiness Rank: 43<br>Group: Most corrupt (bottom 10)","Country: Tajikistan<br>CPI: 20<br>Happiness Rank: 88<br>Group: Most corrupt (bottom 10)","Country: Venezuela<br>CPI: 13<br>Happiness Rank: 79<br>Group: Most corrupt (bottom 10)","Country: Yemen<br>CPI: 16<br>Happiness Rank: 133<br>Group: Most corrupt (bottom 10)"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(255,0,0,1)","opacity":0.90000000000000002,"size":11.338582677165356,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(255,0,0,1)"}},"hoveron":"points","name":"Most corrupt (bottom 10)","legendgroup":"Most corrupt (bottom 10)","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[37,36,37,47,75,71,23,42,24,73,43,29,35,59,36,45,41,27,76,66,42,40,22,55,50,53,57,35,34,35,31,76,30,37,71,28,37,53,43,49,23,26,23,42,72,39,34,24,23,77,62,56,44,73,46,39,31,41,46,26,60,24,39,25,61,25,34,50,28,51,30,51,31,33,46,38,25,49,35,32,25,42,29,35,28,33,34,54,61,46,52,43,36,35,54,56,41,60,34,40,35,31,40,26,36,68,71,69,73,33,37,24],"y":[-87,-85,-48,-82,-10,-14,-101,-62,-129,-16,-116,-73,-65,-137,-44,-81,-110,-104,-15,-38,-60,-78,-89,-12,-63,-50,-18,-69,-74,-127,-33,-34,-135,-130,-27,-95,-112,-91,-120,-64,-42,-97,-61,-56,-3,-126,-80,-100,-92,-17,-5,-41,-67,-51,-125,-49,-114,-29,-13,-75,-46,-142,-141,-121,-19,-123,-136,-59,-122,-40,-111,-70,-25,-77,-76,-107,-90,-106,-93,-109,-102,-84,-108,-39,-57,-68,-53,-35,-55,-32,-28,-99,-37,-140,-45,-21,-83,-36,-128,-131,-58,-124,-115,-117,-105,-22,-20,-23,-26,-47,-134,-138],"text":["Country: Albania<br>CPI: 37<br>Happiness Rank: 87<br>Group: Other","Country: Algeria<br>CPI: 36<br>Happiness Rank: 85<br>Group: Other","Country: Argentina<br>CPI: 37<br>Happiness Rank: 48<br>Group: Other","Country: Armenia<br>CPI: 47<br>Happiness Rank: 82<br>Group: Other","Country: Australia<br>CPI: 75<br>Happiness Rank: 10<br>Group: Other","Country: Austria<br>CPI: 71<br>Happiness Rank: 14<br>Group: Other","Country: Azerbaijan<br>CPI: 23<br>Happiness Rank: 101<br>Group: Other","Country: Bahrain<br>CPI: 42<br>Happiness Rank: 62<br>Group: Other","Country: Bangladesh<br>CPI: 24<br>Happiness Rank: 129<br>Group: Other","Country: Belgium<br>CPI: 73<br>Happiness Rank: 16<br>Group: Other","Country: Benin<br>CPI: 43<br>Happiness Rank: 116<br>Group: Other","Country: Bolivia<br>CPI: 29<br>Happiness Rank: 73<br>Group: Other","Country: Bosnia and Herzegovina<br>CPI: 35<br>Happiness Rank: 65<br>Group: Other","Country: Botswana<br>CPI: 59<br>Happiness Rank: 137<br>Group: Other","Country: Brazil<br>CPI: 36<br>Happiness Rank: 44<br>Group: Other","Country: Bulgaria<br>CPI: 45<br>Happiness Rank: 81<br>Group: Other","Country: Burkina Faso<br>CPI: 41<br>Happiness Rank: 110<br>Group: Other","Country: Cameroon<br>CPI: 27<br>Happiness Rank: 104<br>Group: Other","Country: Canada<br>CPI: 76<br>Happiness Rank: 15<br>Group: Other","Country: Chile<br>CPI: 66<br>Happiness Rank: 38<br>Group: Other","Country: China<br>CPI: 42<br>Happiness Rank: 60<br>Group: Other","Country: Colombia<br>CPI: 40<br>Happiness Rank: 78<br>Group: Other","Country: Congo<br>CPI: 22<br>Happiness Rank: 89<br>Group: Other","Country: Costa Rica<br>CPI: 55<br>Happiness Rank: 12<br>Group: Other","Country: Croatia<br>CPI: 50<br>Happiness Rank: 63<br>Group: Other","Country: Cyprus<br>CPI: 53<br>Happiness Rank: 50<br>Group: Other","Country: Czechia<br>CPI: 57<br>Happiness Rank: 18<br>Group: Other","Country: Dominican Republic<br>CPI: 35<br>Happiness Rank: 69<br>Group: Other","Country: Ecuador<br>CPI: 34<br>Happiness Rank: 74<br>Group: Other","Country: Egypt<br>CPI: 35<br>Happiness Rank: 127<br>Group: Other","Country: El Salvador<br>CPI: 31<br>Happiness Rank: 33<br>Group: Other","Country: Estonia<br>CPI: 76<br>Happiness Rank: 34<br>Group: Other","Country: Eswatini<br>CPI: 30<br>Happiness Rank: 135<br>Group: Other","Country: Ethiopia<br>CPI: 37<br>Happiness Rank: 130<br>Group: Other","Country: France<br>CPI: 71<br>Happiness Rank: 27<br>Group: Other","Country: Gabon<br>CPI: 28<br>Happiness Rank: 95<br>Group: Other","Country: Gambia<br>CPI: 37<br>Happiness Rank: 112<br>Group: Other","Country: Georgia<br>CPI: 53<br>Happiness Rank: 91<br>Group: Other","Country: Ghana<br>CPI: 43<br>Happiness Rank: 120<br>Group: Other","Country: Greece<br>CPI: 49<br>Happiness Rank: 64<br>Group: Other","Country: Guatemala<br>CPI: 23<br>Happiness Rank: 42<br>Group: Other","Country: Guinea<br>CPI: 26<br>Happiness Rank: 97<br>Group: Other","Country: Honduras<br>CPI: 23<br>Happiness Rank: 61<br>Group: Other","Country: Hungary<br>CPI: 42<br>Happiness Rank: 56<br>Group: Other","Country: Iceland<br>CPI: 72<br>Happiness Rank: 3<br>Group: Other","Country: India<br>CPI: 39<br>Happiness Rank: 126<br>Group: Other","Country: Indonesia<br>CPI: 34<br>Happiness Rank: 80<br>Group: Other","Country: Iran<br>CPI: 24<br>Happiness Rank: 100<br>Group: Other","Country: Iraq<br>CPI: 23<br>Happiness Rank: 92<br>Group: Other","Country: Ireland<br>CPI: 77<br>Happiness Rank: 17<br>Group: Other","Country: Israel<br>CPI: 62<br>Happiness Rank: 5<br>Group: Other","Country: Italy<br>CPI: 56<br>Happiness Rank: 41<br>Group: Other","Country: Jamaica<br>CPI: 44<br>Happiness Rank: 67<br>Group: Other","Country: Japan<br>CPI: 73<br>Happiness Rank: 51<br>Group: Other","Country: Jordan<br>CPI: 46<br>Happiness Rank: 125<br>Group: Other","Country: Kazakhstan<br>CPI: 39<br>Happiness Rank: 49<br>Group: Other","Country: Kenya<br>CPI: 31<br>Happiness Rank: 114<br>Group: Other","Country: Kosovo<br>CPI: 41<br>Happiness Rank: 29<br>Group: Other","Country: Kuwait<br>CPI: 46<br>Happiness Rank: 13<br>Group: Other","Country: Kyrgyzstan<br>CPI: 26<br>Happiness Rank: 75<br>Group: Other","Country: Latvia<br>CPI: 60<br>Happiness Rank: 46<br>Group: Other","Country: Lebanon<br>CPI: 24<br>Happiness Rank: 142<br>Group: Other","Country: Lesotho<br>CPI: 39<br>Happiness Rank: 141<br>Group: Other","Country: Liberia<br>CPI: 25<br>Happiness Rank: 121<br>Group: Other","Country: Lithuania<br>CPI: 61<br>Happiness Rank: 19<br>Group: Other","Country: Madagascar<br>CPI: 25<br>Happiness Rank: 123<br>Group: Other","Country: Malawi<br>CPI: 34<br>Happiness Rank: 136<br>Group: Other","Country: Malaysia<br>CPI: 50<br>Happiness Rank: 59<br>Group: Other","Country: Mali<br>CPI: 28<br>Happiness Rank: 122<br>Group: Other","Country: Malta<br>CPI: 51<br>Happiness Rank: 40<br>Group: Other","Country: Mauritania<br>CPI: 30<br>Happiness Rank: 111<br>Group: Other","Country: Mauritius<br>CPI: 51<br>Happiness Rank: 70<br>Group: Other","Country: Mexico<br>CPI: 31<br>Happiness Rank: 25<br>Group: Other","Country: Mongolia<br>CPI: 33<br>Happiness Rank: 77<br>Group: Other","Country: Montenegro<br>CPI: 46<br>Happiness Rank: 76<br>Group: Other","Country: Morocco<br>CPI: 38<br>Happiness Rank: 107<br>Group: Other","Country: Mozambique<br>CPI: 25<br>Happiness Rank: 90<br>Group: Other","Country: Namibia<br>CPI: 49<br>Happiness Rank: 106<br>Group: Other","Country: Nepal<br>CPI: 35<br>Happiness Rank: 93<br>Group: Other","Country: Niger<br>CPI: 32<br>Happiness Rank: 109<br>Group: Other","Country: Nigeria<br>CPI: 25<br>Happiness Rank: 102<br>Group: Other","Country: North Macedonia<br>CPI: 42<br>Happiness Rank: 84<br>Group: Other","Country: Pakistan<br>CPI: 29<br>Happiness Rank: 108<br>Group: Other","Country: Panama<br>CPI: 35<br>Happiness Rank: 39<br>Group: Other","Country: Paraguay<br>CPI: 28<br>Happiness Rank: 57<br>Group: Other","Country: Peru<br>CPI: 33<br>Happiness Rank: 68<br>Group: Other","Country: Philippines<br>CPI: 34<br>Happiness Rank: 53<br>Group: Other","Country: Poland<br>CPI: 54<br>Happiness Rank: 35<br>Group: Other","Country: Portugal<br>CPI: 61<br>Happiness Rank: 55<br>Group: Other","Country: Romania<br>CPI: 46<br>Happiness Rank: 32<br>Group: Other","Country: Saudi Arabia<br>CPI: 52<br>Happiness Rank: 28<br>Group: Other","Country: Senegal<br>CPI: 43<br>Happiness Rank: 99<br>Group: Other","Country: Serbia<br>CPI: 36<br>Happiness Rank: 37<br>Group: Other","Country: Sierra Leone<br>CPI: 35<br>Happiness Rank: 140<br>Group: Other","Country: Slovakia<br>CPI: 54<br>Happiness Rank: 45<br>Group: Other","Country: Slovenia<br>CPI: 56<br>Happiness Rank: 21<br>Group: Other","Country: South Africa<br>CPI: 41<br>Happiness Rank: 83<br>Group: Other","Country: Spain<br>CPI: 60<br>Happiness Rank: 36<br>Group: Other","Country: Sri Lanka<br>CPI: 34<br>Happiness Rank: 128<br>Group: Other","Country: Tanzania<br>CPI: 40<br>Happiness Rank: 131<br>Group: Other","Country: Thailand<br>CPI: 35<br>Happiness Rank: 58<br>Group: Other","Country: Togo<br>CPI: 31<br>Happiness Rank: 124<br>Group: Other","Country: Tunisia<br>CPI: 40<br>Happiness Rank: 115<br>Group: Other","Country: Uganda<br>CPI: 26<br>Happiness Rank: 117<br>Group: Other","Country: Ukraine<br>CPI: 36<br>Happiness Rank: 105<br>Group: Other","Country: United Arab Emirates<br>CPI: 68<br>Happiness Rank: 22<br>Group: Other","Country: United Kingdom<br>CPI: 71<br>Happiness Rank: 20<br>Group: Other","Country: United States<br>CPI: 69<br>Happiness Rank: 23<br>Group: Other","Country: Uruguay<br>CPI: 73<br>Happiness Rank: 26<br>Group: Other","Country: Uzbekistan<br>CPI: 33<br>Happiness Rank: 47<br>Group: Other","Country: Zambia<br>CPI: 37<br>Happiness Rank: 134<br>Group: Other","Country: Zimbabwe<br>CPI: 24<br>Happiness Rank: 138<br>Group: Other"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(153,153,153,1)","opacity":0.90000000000000002,"size":11.338582677165356,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(153,153,153,1)"}},"hoveron":"points","name":"Other","legendgroup":"Other","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[13,13.974683544303797,14.949367088607595,15.924050632911392,16.898734177215189,17.873417721518987,18.848101265822784,19.822784810126581,20.797468354430379,21.77215189873418,22.746835443037973,23.721518987341774,24.696202531645568,25.670886075949369,26.645569620253163,27.620253164556964,28.594936708860757,29.569620253164558,30.544303797468356,31.518987341772153,32.493670886075947,33.468354430379748,34.443037974683548,35.417721518987342,36.392405063291136,37.367088607594937,38.341772151898738,39.316455696202532,40.291139240506325,41.265822784810126,42.240506329113927,43.215189873417721,44.189873417721515,45.164556962025316,46.139240506329116,47.11392405063291,48.088607594936711,49.063291139240505,50.037974683544306,51.0126582278481,51.9873417721519,52.962025316455694,53.936708860759495,54.911392405063289,55.88607594936709,56.860759493670884,57.835443037974684,58.810126582278478,59.784810126582279,60.759493670886073,61.734177215189874,62.708860759493668,63.683544303797468,64.658227848101262,65.632911392405063,66.607594936708864,67.582278481012651,68.556962025316452,69.531645569620252,70.506329113924039,71.481012658227854,72.455696202531641,73.430379746835442,74.405063291139243,75.379746835443029,76.354430379746844,77.329113924050631,78.303797468354432,79.278481012658233,80.25316455696202,81.22784810126582,82.202531645569621,83.177215189873422,84.151898734177209,85.12658227848101,86.101265822784811,87.075949367088612,88.050632911392398,89.025316455696199,90],"y":[-120.24529539913438,-118.70400018861193,-117.16270497808948,-115.62140976756704,-114.0801145570446,-112.53881934652215,-110.9975241359997,-109.45622892547725,-107.91493371495481,-106.37363850443235,-104.83234329390991,-103.29104808338747,-101.74975287286502,-100.20845766234257,-98.667162451820133,-97.125867241297669,-95.584572030775234,-94.043276820252785,-92.501981609730336,-90.960686399207887,-89.419391188685452,-87.878095978162989,-86.33680076764054,-84.795505557118105,-83.254210346595656,-81.712915136073207,-80.171619925550758,-78.630324715028323,-77.089029504505874,-75.547734293983424,-74.006439083460975,-72.465143872938526,-70.923848662416091,-69.382553451893642,-67.841258241371179,-66.299963030848744,-64.758667820326295,-63.217372609803853,-61.676077399281397,-60.134782188758955,-58.593486978236506,-57.052191767714064,-55.510896557191614,-53.969601346669172,-52.428306136146716,-50.887010925624281,-49.345715715101825,-47.804420504579383,-46.263125294056934,-44.721830083534492,-43.180534873012043,-41.639239662489601,-40.097944451967145,-38.55664924144471,-37.015354030922254,-35.474058820399804,-33.93276360987737,-32.39146839935492,-30.850173188832468,-29.30887797831004,-27.767582767787562,-26.226287557265135,-24.684992346742682,-23.143697136220229,-21.602401925697801,-20.061106715175324,-18.519811504652896,-16.978516294130443,-15.437221083607991,-13.895925873085561,-12.354630662563109,-10.813335452040658,-9.2720402415182051,-7.7307450309957755,-6.1894498204733228,-4.648154609950871,-3.1068593994284188,-1.565564188905989,-0.024268978383536977,1.5170262321389152],"text":"","type":"scatter","mode":"lines","name":"fitted values","line":{"width":3.7795275590551185,"color":"rgba(0,0,0,1)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[13,13.974683544303797,14.949367088607595,15.924050632911392,16.898734177215189,17.873417721518987,18.848101265822784,19.822784810126581,20.797468354430379,21.77215189873418,22.746835443037973,23.721518987341774,24.696202531645568,25.670886075949369,26.645569620253163,27.620253164556964,28.594936708860757,29.569620253164558,30.544303797468356,31.518987341772153,32.493670886075947,33.468354430379748,34.443037974683548,35.417721518987342,36.392405063291136,37.367088607594937,38.341772151898738,39.316455696202532,40.291139240506325,41.265822784810126,42.240506329113927,43.215189873417721,44.189873417721515,45.164556962025316,46.139240506329116,47.11392405063291,48.088607594936711,49.063291139240505,50.037974683544306,51.0126582278481,51.9873417721519,52.962025316455694,53.936708860759495,54.911392405063289,55.88607594936709,56.860759493670884,57.835443037974684,58.810126582278478,59.784810126582279,60.759493670886073,61.734177215189874,62.708860759493668,63.683544303797468,64.658227848101262,65.632911392405063,66.607594936708864,67.582278481012651,68.556962025316452,69.531645569620252,70.506329113924039,71.481012658227854,72.455696202531641,73.430379746835442,74.405063291139243,75.379746835443029,76.354430379746844,77.329113924050631,78.303797468354432,79.278481012658233,80.25316455696202,81.22784810126582,82.202531645569621,83.177215189873422,84.151898734177209,85.12658227848101,86.101265822784811,87.075949367088612,88.050632911392398,89.025316455696199,90,90,90,89.025316455696199,88.050632911392398,87.075949367088612,86.101265822784811,85.12658227848101,84.151898734177209,83.177215189873422,82.202531645569621,81.22784810126582,80.25316455696202,79.278481012658233,78.303797468354432,77.329113924050631,76.354430379746844,75.379746835443029,74.405063291139243,73.430379746835442,72.455696202531641,71.481012658227854,70.506329113924039,69.531645569620252,68.556962025316452,67.582278481012651,66.607594936708864,65.632911392405063,64.658227848101262,63.683544303797468,62.708860759493668,61.734177215189874,60.759493670886073,59.784810126582279,58.810126582278478,57.835443037974684,56.860759493670884,55.88607594936709,54.911392405063289,53.936708860759495,52.962025316455694,51.9873417721519,51.0126582278481,50.037974683544306,49.063291139240505,48.088607594936711,47.11392405063291,46.139240506329116,45.164556962025316,44.189873417721515,43.215189873417721,42.240506329113927,41.265822784810126,40.291139240506325,39.316455696202532,38.341772151898738,37.367088607594937,36.392405063291136,35.417721518987342,34.443037974683548,33.468354430379748,32.493670886075947,31.518987341772153,30.544303797468356,29.569620253164558,28.594936708860757,27.620253164556964,26.645569620253163,25.670886075949369,24.696202531645568,23.721518987341774,22.746835443037973,21.77215189873418,20.797468354430379,19.822784810126581,18.848101265822784,17.873417721518987,16.898734177215189,15.924050632911392,14.949367088607595,13.974683544303797,13,13],"y":[-130.1532249759841,-128.38562978846343,-126.62010469412091,-124.85680047614157,-123.09588120012165,-121.33752545912644,-119.58192771578916,-117.82929973949688,-116.07987213258144,-114.33389593380271,-112.59164427990213,-110.85341409620095,-109.11952777468231,-107.39033478231048,-105.66621312318577,-103.94757055539249,-102.23484543732653,-100.52850704973558,-98.82905521038289,-97.137018971043247,-95.452954165809103,-93.777439571401402,-92.111071451840559,-90.454456299870984,-88.808201664067965,-87.172905069340047,-85.549141200204673,-83.937447713273102,-82.338310259886072,-80.752147503008416,-79.179297067487397,-77.620003431326197,-76.074408717561397,-74.542547169697869,-73.024343801639574,-71.519617344451248,-70.028087224123894,-68.549383958618762,-67.083062110358924,-65.628614801691782,-64.185488798978824,-62.753099276050726,-61.330843545369106,-59.918113256630015,-58.514304773335091,-57.118827623180003,-55.731111064112945,-54.35060891048203,-52.976802825718593,-51.609204316423671,-50.247355665968094,-48.890830031974701,-47.539230908288062,-46.192191123616787,-44.849371519730006,-43.510459424317609,-42.175167008736111,-40.843229599456862,-39.514403994203597,-38.188466819303656,-36.865212953314874,-35.544454033096088,-34.226017051728249,-32.909743052667324,-31.595485920857847,-30.283111268963083,-28.97249541512079,-27.663524447511236,-26.356093370370786,-25.050105325767056,-23.745470885381195,-22.44210740664024,-21.139938447753206,-19.83889323648917,-18.538906187860228,-17.239916466218478,-15.941867587625332,-14.644707058695678,-13.348386048449461,-12.052859090016048,-12.052859090016048,15.086911554293879,13.299848091682387,11.513578680883699,9.7281487887684932,7.9436072463167369,6.1600065469135821,4.3774031744976192,2.5958579647167959,0.81543650255892253,-0.9637904397450221,-2.741746420404068,-4.5183487968451939,-6.2935081407496494,-8.0671275941850009,-9.8391021613875651,-11.609317930537758,-13.377651219773137,-15.143967641757113,-16.908121081434182,-18.669952582260251,-20.429289137316424,-22.185942383461338,-23.939707199252979,-25.690360211018632,-27.437658216481999,-29.181336542114501,-30.921107359272629,-32.656657995646228,-34.3876492930045,-36.113714080055992,-37.834455850645313,-39.549447762395275,-41.258232098676736,-42.960320366090706,-44.655194228068559,-46.342307498958341,-48.02108943670833,-49.690949569014123,-51.351284259377401,-53.001485157494187,-54.640949575826127,-56.269092688203862,-57.885361260988944,-59.489248416528696,-61.08030871724624,-62.658172681102783,-64.222559734089415,-65.773288607270786,-67.310284314550856,-68.833581099434554,-70.343321084958433,-71.839748749125675,-73.323201716783544,-74.794098650896842,-76.252925202806367,-77.700219029123346,-79.136554814365226,-80.562530083440521,-81.978752384924576,-83.385828211561801,-84.784353827372527,-86.174908009077782,-87.55804659076999,-88.934298624223942,-90.30416392720285,-91.668111780454495,-93.02658054237466,-94.379977971047722,-95.728682070573981,-97.073042307917703,-98.413381075061992,-99.749995297328184,-101.08315811145762,-102.41312055621023,-103.74011323391785,-105.06434791396754,-106.38601905899252,-107.70530526205805,-109.02237058876042,-110.33736582228467,-130.1532249759841],"text":"","type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(0,0,0,0.4)","dash":"dash"},"fill":"toself","fillcolor":"rgba(153,153,153,0.4)","hoveron":"points","hoverinfo":"x+y","showlegend":false,"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":42.5670402656704,"r":7.9701120797011216,"b":41.178912411789128,"l":47.820672478206731},"paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402241},"title":{"text":"<b> Happiness Rank vs CPI — 2023 <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":18.596928185969279},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[9.1500000000000004,93.849999999999994],"tickmode":"array","ticktext":["25","50","75"],"tickvals":[25,50,75],"categoryorder":"array","categoryarray":["25","50","75"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.9850560398505603,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":13.283520132835205},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"Corruption Perceptions Index","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402241}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-150.90434557771471,22.991257132008574],"tickmode":"array","ticktext":["0","50","100","150"],"tickvals":[0,-50,-100,-150],"categoryorder":"array","categoryarray":["0","50","100","150"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.9850560398505608,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":13.283520132835205},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"Happiness Rank","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402241}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":12.7521793275218},"title":{"text":"Group","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402241}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"66a46e9d87cf":{"x":{},"y":{},"colour":{},"text":{},"type":"scatter"},"66a4283f5fc5":{"x":{},"y":{}}},"cur_data":"66a46e9d87cf","visdat":{"66a46e9d87cf":["function (y) ","x"],"66a4283f5fc5":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Optional: save as HTML ----</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>htmlwidgets<span class="sc">::</span><span class="fu">saveWidget</span>(p_interactive,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"/Users/ViktoriaAxelsson/Desktop/cpi_vs_happiness_2023.html"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Key Finding
</div>
</div>
<div class="callout-body-container callout-body">
<p>In this 2023 scatterplot, we can observe a clear trend: the least corrupt countries generally occupy the highest positions in global happiness rankings. For example, Finland is ranked the happiest country in the world, with a CPI score of 87, followed closely by Denmark at number two with a CPI of 90. Both countries demonstrate exceptionally low levels of perceived corruption, suggesting that transparency and good governance may contribute to the overall well-being of their populations.</p>
<p>In contrast, the most corrupt countries generally appear lower in the happiness rankings, often falling between 50th and 150th place. This pattern supports the idea that higher corruption can negatively impact citizens’ satisfaction and trust in institutions, which in turn affects overall happiness.</p>
<p>Yet, there are notable exceptions to this trend. Nicaragua, despite being among the 10 most corrupt countries globally, ranks 43rd in happiness. Similarly, Mexico, with a relatively low CPI of 31, achieves the 25th position, and Kuwait ranks 13th happiest despite a moderately high CPI of 46. These examples illustrate that corruption alone does not fully determine a country’s happiness; other social, economic, and cultural factors clearly play an important role.</p>
<p>Conversely, some countries with very low corruption scores do not rank among the very happiest. For instance, Singapore has a CPI of 83, reflecting low perceived corruption, yet it is only ranked 30th in happiness—five places behind Mexico. This demonstrates that while low corruption is often associated with higher happiness, it is not a sufficient condition on its own; other variables, such as income distribution, social support, and public services, likely influence overall well-being alongside governance.</p>
<p>Overall, the 2023 data highlights a general alignment between low corruption and higher happiness, while also underscoring the complexity of the relationship: happiness is multifaceted, and a country’s well-being is shaped by the interplay of multiple factors beyond corruption alone.</p>
</div>
</div>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Corruption can influence happiness, but it is not the sole determinant. Uzbekistan’s case shows that reductions in corruption can improve well-being, as observed in 2023–2024. However, broader trends in happiness often depend heavily on other social and economic factors, such as economic reforms, health, education, and government policies.</p>
<p>The 2023 global data further illustrates that low corruption generally aligns with higher happiness—countries like Finland and Denmark top the happiness rankings with very low CPI scores. Yet exceptions exist: some highly corrupt countries, such as Nicaragua and Mexico, still rank relatively high in happiness, while certain low-corruption countries, like Singapore, are not among the very happiest. This suggests that corruption plays a role, but it is only one of several factors shaping national well-being.</p>
<p>Future research exploring these additional influences would provide a more complete understanding of what drives happiness. As our group work has shown, other factors—such as climate, vacation time, and income—also contribute to happiness, each in different ways.</p>
<p>In addressing the overarching question of which country is the happiest and why, the answer is straightforward: Finland, ranked the happiest country for the eighth consecutive year. This demonstrates that consistent policies and social structures can support national well-being. Yet our study also confirms that no single factor alone guarantees happiness; it is the combination of multiple elements that determines a country’s overall happiness.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/viktoriaaxelsson\.github\.io\/STA9750-2025-FALL\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>